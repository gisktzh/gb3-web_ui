<api-dialog-wrapper title="Hinweis" (closeEvent)="cancel()">
  <ng-container content>
    <div class="data-download-email-dialog">
      <p>
        Die Vorbereitung Ihrer Bestellung kann lange dauern. Während der Vorbereitung darf das Browser-Fenster nicht geschlossen werden.
        Alternativ können wir Ihnen die Daten auch per Mail zusenden.
      </p>
      <mat-checkbox class="data-download-email-dialog__checkbox" [(ngModel)]="isEmailActive"
        >Daten per Mail beziehen (optional)</mat-checkbox
      >
      <mat-form-field
        appearance="fill"
        class="data-download-email-dialog__form"
        [ngClass]="{'data-download-email-dialog__form--hidden': !isEmailActive}"
      >
        <mat-label>Email</mat-label>
        <input [formControl]="emailFormControl" type="email" matInput />
        @if (emailFormControl.invalid && (emailFormControl.dirty || emailFormControl.touched)) {
          <mat-error> Geben Sie bitte eine gültige Email Adresse ein. </mat-error>
        }
      </mat-form-field>
    </div>
  </ng-container>
  <ng-container actions>
    <button (click)="cancel()" mat-button>Abbrechen</button>
    <button (click)="download()" mat-button [disabled]="isEmailActive && emailFormControl.invalid">Download</button>
  </ng-container>
</api-dialog-wrapper>
