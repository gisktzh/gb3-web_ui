<mat-expansion-panel
  #itemExpansionPanel
  [expanded]="expanded"
  class="expandable-list-item"
  [disabled]="disabled"
  hideToggle="true"
  [ngClass]="{
    'expandable-list-item--no-padding': noPadding,
    'expandable-list-item--sticky-header': stickyHeader && itemExpansionPanel.expanded,
  }"
>
  <mat-expansion-panel-header
    class="expandable-list-item__header"
    [ngClass]="{
      'expandable-list-item__header--sticky-header': stickyHeader && itemExpansionPanel.expanded,
    }"
    [tabIndex]="allowTabFocus ? 0 : -1"
  >
    <expandable-list-item-header
      [isExpanded]="itemExpansionPanel.expanded"
      [numberOfItems]="numberOfItems"
      [title]="header"
      [loadingState]="loadingState"
      [showBadge]="showBadge"
      class="expandable-list-item__header__item"
    ></expandable-list-item-header>
  </mat-expansion-panel-header>

  @if (renderContentEagerly || itemExpansionPanel.expanded) {
    <ng-content></ng-content>
  } @else {
    <ng-template matExpansionPanelContent></ng-template>
  }
</mat-expansion-panel>
